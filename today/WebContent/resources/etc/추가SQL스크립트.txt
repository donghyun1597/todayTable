--추가 SQL스크립트
--프로시져
--유저생성

DROP USER TODAY CASCADE;

CREATE USER TODAY IDENTIFIED BY TODAY;
GRANT CONNECT,RESOURCE TO TODAY;

CREATE OR REPLACE PROCEDURE RESET_SEQ(SEQ_NAME2 IN VARCHAR2) IS CURR_VAL NUMBER;
BEGIN
    EXECUTE IMMEDIATE 'ALTER SEQUENCE ' || SEQ_NAME2 || ' MINVALUE 0';
    EXECUTE IMMEDIATE 'SELECT ' || SEQ_NAME2 || '.NEXTVAL FROM DUAL' INTO CURR_VAL;
    EXECUTE IMMEDIATE 'ALTER SEQUENCE ' || SEQ_NAME2 || ' INCREMENT BY -' || CURR_VAL;
    EXECUTE IMMEDIATE 'SELECT ' || SEQ_NAME2 || '.NEXTVAL FROM DUAL' INTO CURR_VAL;
    EXECUTE IMMEDIATE 'ALTER SEQUENCE ' || SEQ_NAME2 || ' INCREMENT BY 1';
END RESET_SEQ;